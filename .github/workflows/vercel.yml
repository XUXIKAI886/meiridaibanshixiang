# å¯é€‰ï¼šéƒ¨ç½²åˆ° Vercelï¼ˆæ¨èç”¨äº Next.jsï¼‰
# ä½¿ç”¨æ­¤å·¥ä½œæµéœ€è¦åœ¨ GitHub Secrets ä¸­è®¾ç½®ï¼š
# VERCEL_TOKEN, VERCEL_ORG_ID, VERCEL_PROJECT_ID

name: ğŸš€ Deploy to Vercel

# é»˜è®¤ç¦ç”¨ï¼Œå¦‚éœ€ä½¿ç”¨è¯·å–æ¶ˆæ³¨é‡Šä¸‹é¢çš„ on é…ç½®
# on:
#   push:
#     branches: [ main ]
#   workflow_dispatch:

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
    - name: ğŸ“¦ æ£€å‡ºä»£ç 
      uses: actions/checkout@v4
    
    - name: ğŸ“¦ è®¾ç½® Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '18'
        cache: 'npm'
    
    - name: ğŸ“¦ å®‰è£…ä¾èµ–
      run: npm ci
    
    - name: ğŸ”§ æ„å»ºåº”ç”¨
      run: npm run build
    
    - name: ğŸš€ éƒ¨ç½²åˆ° Vercel
      uses: amondnet/vercel-action@v25
      with:
        vercel-token: ${{ secrets.VERCEL_TOKEN }}
        vercel-org-id: ${{ secrets.VERCEL_ORG_ID }}
        vercel-project-id: ${{ secrets.VERCEL_PROJECT_ID }}
        vercel-args: '--prod'
        working-directory: ./
